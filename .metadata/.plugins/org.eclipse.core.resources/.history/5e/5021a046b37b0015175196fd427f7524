package io;

import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.Scanner;

public class Scan {
	
	private LinkedList<String> list;
	private Iterator<String> iter;
	
	public Scan(String filename){
		
	}
	
	public String getNextWord(){
		if(iter.hasNext()){
			return iter.next();
		} else {
			return null;
		}
	}
	
	public static void main(String[] args){
		File sourceFile = new File("input/source1.c");
		ArrayList<Character> trans = new ArrayList<Character>();
		try {
			//DataInputStream in = new DataInputStream(new FileInputStream(sourceFile));
			FileInputStream in = new FileInputStream(sourceFile);
			char ch1 = ' ';
			char ch2 = ' ';//ÓÃÓÚÔÚÑéÖ¤ÊÇ·ñÎªÒýºÅÄÚ½áÎ²»òÕß×¢ÊÍ½áÎ²
			while(in.available()>0){
				if(ch2 != ' '){
					ch1 = ch2;
				} else {
					ch1 = (char) in.read();
				}
				if(ch1 == '\n'){
					trans.add(' ');
				}
				
				if(ch1 == '\''){//±ÜÃâÉ¾³ý¿Õ°×Ê±½«¡®¡¯°üº¬µÄ¿Õ°××Ö·ûÌÞ³ý
					trans.add(ch1);
					trans.add((char)in.read());
					trans.add((char)in.read());
				} else if (ch1 == '\"'){//±ÜÃâ½«×Ö·û´®ÖÐµÄ¿Õ°×ÌÞ³ý
					trans.add(ch1);
					while(in.available()>0){
						ch1 = (char)in.read();
						trans.add(ch1);
						if(ch1 == '\"'){
							break;
						}
					}
				} else if (ch1 == '/'){//ÌÞ³ý×Ö·û´®
					ch2 = (char)in.read();
					if(ch2 == '/'){
						while(in.available() > 0){
							ch2 = (char)in.read();
							if(ch2 == '\n'){
								break;
							}
						}
						ch2 = ' ';
					} else if (ch2 == '*') {
						while(in.available() > 0){
							ch1 = (char)in.read();
							if(ch1 == '*'){
								ch2 = (char)in.read();
								if(ch2 == '/'){
									break;
								}
							}
						}
					} else {
						if(ch2 == ' '){
							while(ch2 == ' '){
								ch2 = (char)in.read();
							}
						}
						trans.add(ch1);
						trans.add(ch2);
						ch2 = ' ';
					}
				} else if(ch1 == ' '){
					if(trans.get(trans.size()-1) == ' '){
						continue;
					} else {
						trans.add(' ');
					}
				} else {
					if(ch1 == '\n'){
						trans.add(' ');
					} else {
						trans.add(ch1);
					}
				}
			}
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		char[] chStr = new char[trans.size()];
		for(int i = 0;i < trans.size();i++){
			chStr[i] = trans.get(i).charValue();
		}
		String result = new String(chStr);
		System.out.println(result);
	}

}
